<!--
  Generated template for the BookPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

  <ion-navbar>
    <ion-title>详情</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="refresh();">
        <ion-icon name="ios-refresh-outline"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <div class="base-info" *ngIf="!!bookItem">
    <ion-list no-lines>
      <ion-item>
        <div class="book-cover" item-left>
          <img [src]="bookItem.src">
        </div>
        <h2>{{bookItem.title}}</h2>
        <p>{{bookItem.author}}</p>
        <p>分类：{{bookItem.name}} {{bookItem.category}}</p>
        <button ion-button small>收藏</button>
        <button ion-button small>批量下载</button>
      </ion-item>
    </ion-list>
    <ion-toolbar>
      <ion-segment [(ngModel)]="dataType" color="light-gray" (ionChange)="segmentChanged($event)">
        <ion-segment-button value="chapter">
          章节
        </ion-segment-button>
        <ion-segment-button value="brief">
          简介
        </ion-segment-button>
        <ion-segment-button value="other">
          其他资源
        </ion-segment-button>
      </ion-segment>
    </ion-toolbar>
  </div>
</ion-header>

<ion-content>
    <div [ngSwitch]="dataType">
        
      <ion-list *ngSwitchCase="'chapter'">
        <ion-list [virtualScroll]="chapters" approxItemHeight="50px">
          <ion-item *virtualItem="let item">
            <h2>{{item.chapterTitle}}</h2>
            <ion-note item-right>
              <button ion-button icon-only clear>
                <ion-icon name="ios-download-outline"></ion-icon>
              </button>
            </ion-note>
          </ion-item>
        </ion-list>
      </ion-list>
      
      <ion-list *ngSwitchCase="'brief'">
        <div class="brief" padding>
          {{brief}}
        </div>
      </ion-list>

      <div *ngSwitchCase="'other'">
        <ion-list>
          <button ion-item *ngFor="let source of otherSources">
            <ion-thumbnail item-left>
              <img [src]="source.src">
            </ion-thumbnail>
            <h2>{{source.title}}</h2>
            <p>{{source.name}}</p>
            <p>{{source.time}}</p>
          </button>
        </ion-list>
      </div>
      
    </div>
</ion-content>
